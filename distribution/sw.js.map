{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/sw.js"],"names":[],"mappings":"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","file":"sw.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const applicationName = \"restaurant-reviews-application\"\r\nconst staticCacheName = applicationName + \"-v2.0\";\r\n\r\nconst contentImgsCache = applicationName + \"-images\";\r\n\r\nvar allCaches = [\r\n    staticCacheName,\r\n    contentImgsCache\r\n  ];\r\n\r\n  self.addEventListener('install', function(event) {\r\n    event.waitUntil(\r\n      caches.open(staticCacheName).then(function(cache) {\r\n        return cache.addAll([\r\n          '/', // this caches index.html\r\n          '/restaurant.html',\r\n          '/js/restaurant_info.js',\r\n          '/css/styles.css',\r\n          '/js/main.js',\r\n          '/manifest.json',\r\n          '/images/icons/icon-72x72.png',\r\n          '/images/icons/icon-96x96.png',\r\n          '/images/icons/icon-128x128.png',\r\n          '/images/icons/icon-144x144.png',\r\n          '/images/icons/icon-152x152.png',\r\n          '/images/icons/icon-192x192.png',\r\n          '/images/icons/icon-384x384.png',\r\n          '/images/icons/icon-512x512.png'\r\n\r\n        ]);\r\n      })\r\n    );\r\n  });\r\n\r\nself.addEventListener('activate', function(event) {\r\n    event.waitUntil(\r\n      caches.keys().then(function(cacheNames) {\r\n        return Promise.all(\r\n          cacheNames.filter(function(cacheName) {\r\n            return cacheName.startsWith(applicationName) &&\r\n                   !allCaches.includes(cacheName);\r\n          }).map(function(cacheName) {\r\n            return caches.delete(cacheName);\r\n          })\r\n        );\r\n      })\r\n    );\r\n  });\r\n\r\n  self.addEventListener('fetch', function(event) {\r\n    const requestUrl = new URL(event.request.url);\r\n\r\n   \r\n    if (requestUrl.origin === location.origin) {\r\n  \r\n     \r\n      if (requestUrl.pathname.startsWith('/restaurant.html')) {\r\n        event.respondWith(caches.match('/restaurant.html'));\r\n        return;\r\n      }\r\n      if (requestUrl.pathname.startsWith('/img')) {\r\n        event.respondWith(serveImage(event.request));\r\n        return;\r\n      }\r\n    }\r\n  \r\n    event.respondWith(\r\n      caches.match(event.request).then(function(response) {\r\n        return response || fetch(event.request);\r\n      })\r\n    );\r\n  });\r\n  \r\n  function serveImage(request) {\r\n    let imageStorageUrl = request.url;\r\n  \r\n  \r\n    imageStorageUrl = imageStorageUrl.replace(/-small\\.\\w{3}|-medium\\.\\w{3}|-large\\.\\w{3}/i, '');\r\n  \r\n    return caches.open(contentImgsCache).then(function(cache) {\r\n      return cache.match(imageStorageUrl).then(function(response) {\r\n        // if image is in cache, return it, else fetch from network, cache a clone, then return network response\r\n        return response || fetch(request).then(function(networkResponse) {\r\n          cache.put(imageStorageUrl, networkResponse.clone());\r\n          return networkResponse;\r\n        });\r\n      });\r\n    });\r\n  }\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQU0sZUFBZSxHQUFHLGdDQUF4QjtBQUNBLElBQU0sZUFBZSxHQUFHLGVBQWUsR0FBRyxPQUExQztBQUVBLElBQU0sZ0JBQWdCLEdBQUcsZUFBZSxHQUFHLFNBQTNDO0FBRUEsSUFBSSxTQUFTLEdBQUcsQ0FDWixlQURZLEVBRVosZ0JBRlksQ0FBaEI7QUFLRSxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsU0FBdEIsRUFBaUMsVUFBUyxLQUFULEVBQWdCO0FBQy9DLEVBQUEsS0FBSyxDQUFDLFNBQU4sQ0FDRSxNQUFNLENBQUMsSUFBUCxDQUFZLGVBQVosRUFBNkIsSUFBN0IsQ0FBa0MsVUFBUyxLQUFULEVBQWdCO0FBQ2hELFdBQU8sS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUNsQixHQURrQixFQUNiO0FBQ0wsc0JBRmtCLEVBR2xCLHdCQUhrQixFQUlsQixpQkFKa0IsRUFLbEIsYUFMa0IsRUFNbEIsZ0JBTmtCLEVBT2xCLDhCQVBrQixFQVFsQiw4QkFSa0IsRUFTbEIsZ0NBVGtCLEVBVWxCLGdDQVZrQixFQVdsQixnQ0FYa0IsRUFZbEIsZ0NBWmtCLEVBYWxCLGdDQWJrQixFQWNsQixnQ0Fka0IsQ0FBYixDQUFQO0FBaUJELEdBbEJELENBREY7QUFxQkQsQ0F0QkQ7QUF3QkYsSUFBSSxDQUFDLGdCQUFMLENBQXNCLFVBQXRCLEVBQWtDLFVBQVMsS0FBVCxFQUFnQjtBQUM5QyxFQUFBLEtBQUssQ0FBQyxTQUFOLENBQ0UsTUFBTSxDQUFDLElBQVAsR0FBYyxJQUFkLENBQW1CLFVBQVMsVUFBVCxFQUFxQjtBQUN0QyxXQUFPLE9BQU8sQ0FBQyxHQUFSLENBQ0wsVUFBVSxDQUFDLE1BQVgsQ0FBa0IsVUFBUyxTQUFULEVBQW9CO0FBQ3BDLGFBQU8sU0FBUyxDQUFDLFVBQVYsQ0FBcUIsZUFBckIsS0FDQSxDQUFDLFNBQVMsQ0FBQyxRQUFWLENBQW1CLFNBQW5CLENBRFI7QUFFRCxLQUhELEVBR0csR0FISCxDQUdPLFVBQVMsU0FBVCxFQUFvQjtBQUN6QixhQUFPLE1BQU0sQ0FBQyxNQUFQLENBQWMsU0FBZCxDQUFQO0FBQ0QsS0FMRCxDQURLLENBQVA7QUFRRCxHQVRELENBREY7QUFZRCxDQWJIO0FBZUUsSUFBSSxDQUFDLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFVBQVMsS0FBVCxFQUFnQjtBQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLEdBQUosQ0FBUSxLQUFLLENBQUMsT0FBTixDQUFjLEdBQXRCLENBQW5COztBQUdBLE1BQUksVUFBVSxDQUFDLE1BQVgsS0FBc0IsUUFBUSxDQUFDLE1BQW5DLEVBQTJDO0FBR3pDLFFBQUksVUFBVSxDQUFDLFFBQVgsQ0FBb0IsVUFBcEIsQ0FBK0Isa0JBQS9CLENBQUosRUFBd0Q7QUFDdEQsTUFBQSxLQUFLLENBQUMsV0FBTixDQUFrQixNQUFNLENBQUMsS0FBUCxDQUFhLGtCQUFiLENBQWxCO0FBQ0E7QUFDRDs7QUFDRCxRQUFJLFVBQVUsQ0FBQyxRQUFYLENBQW9CLFVBQXBCLENBQStCLE1BQS9CLENBQUosRUFBNEM7QUFDMUMsTUFBQSxLQUFLLENBQUMsV0FBTixDQUFrQixVQUFVLENBQUMsS0FBSyxDQUFDLE9BQVAsQ0FBNUI7QUFDQTtBQUNEO0FBQ0Y7O0FBRUQsRUFBQSxLQUFLLENBQUMsV0FBTixDQUNFLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBSyxDQUFDLE9BQW5CLEVBQTRCLElBQTVCLENBQWlDLFVBQVMsUUFBVCxFQUFtQjtBQUNsRCxXQUFPLFFBQVEsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQVAsQ0FBeEI7QUFDRCxHQUZELENBREY7QUFLRCxDQXRCRDs7QUF3QkEsU0FBUyxVQUFULENBQW9CLE9BQXBCLEVBQTZCO0FBQzNCLE1BQUksZUFBZSxHQUFHLE9BQU8sQ0FBQyxHQUE5QjtBQUdBLEVBQUEsZUFBZSxHQUFHLGVBQWUsQ0FBQyxPQUFoQixDQUF3Qiw2Q0FBeEIsRUFBdUUsRUFBdkUsQ0FBbEI7QUFFQSxTQUFPLE1BQU0sQ0FBQyxJQUFQLENBQVksZ0JBQVosRUFBOEIsSUFBOUIsQ0FBbUMsVUFBUyxLQUFULEVBQWdCO0FBQ3hELFdBQU8sS0FBSyxDQUFDLEtBQU4sQ0FBWSxlQUFaLEVBQTZCLElBQTdCLENBQWtDLFVBQVMsUUFBVCxFQUFtQjtBQUMxRDtBQUNBLGFBQU8sUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFELENBQUwsQ0FBZSxJQUFmLENBQW9CLFVBQVMsZUFBVCxFQUEwQjtBQUMvRCxRQUFBLEtBQUssQ0FBQyxHQUFOLENBQVUsZUFBVixFQUEyQixlQUFlLENBQUMsS0FBaEIsRUFBM0I7QUFDQSxlQUFPLGVBQVA7QUFDRCxPQUhrQixDQUFuQjtBQUlELEtBTk0sQ0FBUDtBQU9ELEdBUk0sQ0FBUDtBQVNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY29uc3QgYXBwbGljYXRpb25OYW1lID0gXCJyZXN0YXVyYW50LXJldmlld3MtYXBwbGljYXRpb25cIlxyXG5jb25zdCBzdGF0aWNDYWNoZU5hbWUgPSBhcHBsaWNhdGlvbk5hbWUgKyBcIi12Mi4wXCI7XHJcblxyXG5jb25zdCBjb250ZW50SW1nc0NhY2hlID0gYXBwbGljYXRpb25OYW1lICsgXCItaW1hZ2VzXCI7XHJcblxyXG52YXIgYWxsQ2FjaGVzID0gW1xyXG4gICAgc3RhdGljQ2FjaGVOYW1lLFxyXG4gICAgY29udGVudEltZ3NDYWNoZVxyXG4gIF07XHJcblxyXG4gIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignaW5zdGFsbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBldmVudC53YWl0VW50aWwoXHJcbiAgICAgIGNhY2hlcy5vcGVuKHN0YXRpY0NhY2hlTmFtZSkudGhlbihmdW5jdGlvbihjYWNoZSkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZS5hZGRBbGwoW1xyXG4gICAgICAgICAgJy8nLCAvLyB0aGlzIGNhY2hlcyBpbmRleC5odG1sXHJcbiAgICAgICAgICAnL3Jlc3RhdXJhbnQuaHRtbCcsXHJcbiAgICAgICAgICAnL2pzL3Jlc3RhdXJhbnRfaW5mby5qcycsXHJcbiAgICAgICAgICAnL2Nzcy9zdHlsZXMuY3NzJyxcclxuICAgICAgICAgICcvanMvbWFpbi5qcycsXHJcbiAgICAgICAgICAnL21hbmlmZXN0Lmpzb24nLFxyXG4gICAgICAgICAgJy9pbWFnZXMvaWNvbnMvaWNvbi03Mng3Mi5wbmcnLFxyXG4gICAgICAgICAgJy9pbWFnZXMvaWNvbnMvaWNvbi05Nng5Ni5wbmcnLFxyXG4gICAgICAgICAgJy9pbWFnZXMvaWNvbnMvaWNvbi0xMjh4MTI4LnBuZycsXHJcbiAgICAgICAgICAnL2ltYWdlcy9pY29ucy9pY29uLTE0NHgxNDQucG5nJyxcclxuICAgICAgICAgICcvaW1hZ2VzL2ljb25zL2ljb24tMTUyeDE1Mi5wbmcnLFxyXG4gICAgICAgICAgJy9pbWFnZXMvaWNvbnMvaWNvbi0xOTJ4MTkyLnBuZycsXHJcbiAgICAgICAgICAnL2ltYWdlcy9pY29ucy9pY29uLTM4NHgzODQucG5nJyxcclxuICAgICAgICAgICcvaW1hZ2VzL2ljb25zL2ljb24tNTEyeDUxMi5wbmcnXHJcblxyXG4gICAgICAgIF0pO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgZXZlbnQud2FpdFVudGlsKFxyXG4gICAgICBjYWNoZXMua2V5cygpLnRoZW4oZnVuY3Rpb24oY2FjaGVOYW1lcykge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcclxuICAgICAgICAgIGNhY2hlTmFtZXMuZmlsdGVyKGZ1bmN0aW9uKGNhY2hlTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVOYW1lLnN0YXJ0c1dpdGgoYXBwbGljYXRpb25OYW1lKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIWFsbENhY2hlcy5pbmNsdWRlcyhjYWNoZU5hbWUpO1xyXG4gICAgICAgICAgfSkubWFwKGZ1bmN0aW9uKGNhY2hlTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZU5hbWUpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0VXJsID0gbmV3IFVSTChldmVudC5yZXF1ZXN0LnVybCk7XHJcblxyXG4gICBcclxuICAgIGlmIChyZXF1ZXN0VXJsLm9yaWdpbiA9PT0gbG9jYXRpb24ub3JpZ2luKSB7XHJcbiAgXHJcbiAgICAgXHJcbiAgICAgIGlmIChyZXF1ZXN0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9yZXN0YXVyYW50Lmh0bWwnKSkge1xyXG4gICAgICAgIGV2ZW50LnJlc3BvbmRXaXRoKGNhY2hlcy5tYXRjaCgnL3Jlc3RhdXJhbnQuaHRtbCcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlcXVlc3RVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2ltZycpKSB7XHJcbiAgICAgICAgZXZlbnQucmVzcG9uZFdpdGgoc2VydmVJbWFnZShldmVudC5yZXF1ZXN0KSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXHJcbiAgICBldmVudC5yZXNwb25kV2l0aChcclxuICAgICAgY2FjaGVzLm1hdGNoKGV2ZW50LnJlcXVlc3QpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2goZXZlbnQucmVxdWVzdCk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGZ1bmN0aW9uIHNlcnZlSW1hZ2UocmVxdWVzdCkge1xyXG4gICAgbGV0IGltYWdlU3RvcmFnZVVybCA9IHJlcXVlc3QudXJsO1xyXG4gIFxyXG4gIFxyXG4gICAgaW1hZ2VTdG9yYWdlVXJsID0gaW1hZ2VTdG9yYWdlVXJsLnJlcGxhY2UoLy1zbWFsbFxcLlxcd3szfXwtbWVkaXVtXFwuXFx3ezN9fC1sYXJnZVxcLlxcd3szfS9pLCAnJyk7XHJcbiAgXHJcbiAgICByZXR1cm4gY2FjaGVzLm9wZW4oY29udGVudEltZ3NDYWNoZSkudGhlbihmdW5jdGlvbihjYWNoZSkge1xyXG4gICAgICByZXR1cm4gY2FjaGUubWF0Y2goaW1hZ2VTdG9yYWdlVXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gaWYgaW1hZ2UgaXMgaW4gY2FjaGUsIHJldHVybiBpdCwgZWxzZSBmZXRjaCBmcm9tIG5ldHdvcmssIGNhY2hlIGEgY2xvbmUsIHRoZW4gcmV0dXJuIG5ldHdvcmsgcmVzcG9uc2VcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2gocmVxdWVzdCkudGhlbihmdW5jdGlvbihuZXR3b3JrUmVzcG9uc2UpIHtcclxuICAgICAgICAgIGNhY2hlLnB1dChpbWFnZVN0b3JhZ2VVcmwsIG5ldHdvcmtSZXNwb25zZS5jbG9uZSgpKTtcclxuICAgICAgICAgIHJldHVybiBuZXR3b3JrUmVzcG9uc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4iXX0="}